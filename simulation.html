<!DOCTYPE html>
<html lang="en-us">

<head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Waste Bucket</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
    <nav class="navigation-bar-container">
        <div class="right">
            <a class="navigation-tab" href="index.html">Home</a>
            <a class="navigation-tab" href="resources.html">Resources</a>
            <a class="navigation-tab" href="leaderboard.html">Leaderboard</a>
            <a class="navigation-tab active" href="simulation.html">Simulation</a>
            <a class="navigation-tab" href="aboutUs.html">About Us</a>
        </div>
    </nav>

    <h3>Waste Bucket</h3>

    <div id="game-container"></div>

    <script>
        let fallingObject1;
        let fallingObject2;
        let catcher;
        let catcherWidth = 70; // Width of the catcher
        let score = 0; // Initialize score

        function setup() {
            let canvas = createCanvas(400, 400);
            canvas.parent('game-container'); // Attach canvas to game-container
            background(173, 216, 230); // Set background color

            // Initialize the falling objects
            fallingObject1 = new FallingObject(255, 0, 0); // Red
            fallingObject2 = new FallingObject(0, 0, 255); // Blue

            // Initialize the catcher
            catcher = {
                x: width / 2 - catcherWidth / 2,
                width: catcherWidth,
                move: function(direction) {
                    this.x += direction * 5; // Move catcher left or right
                    this.x = constrain(this.x, 0, width - this.width); // Keep within bounds
                }
            };
        }

        function draw() {
            background(173, 216, 230);

            // Update and display falling objects
            fallingObject1.update();
            fallingObject1.display();

            fallingObject2.update();
            fallingObject2.display();

            // Move the catcher based on key presses
            if (keyIsDown(LEFT_ARROW)) {
                catcher.move(-1); // Move left
            }
            if (keyIsDown(RIGHT_ARROW)) {
                catcher.move(1); // Move right
            }

            // Check for collisions and update score
            if (fallingObject1.y + fallingObject1.size / 2 >= height - 20 && 
                fallingObject1.x >= catcher.x && 
                fallingObject1.x <= catcher.x + catcher.width) {
                score++; // Increase score for red object
                fallingObject1.reset(); // Reset red object
            }

            if (fallingObject2.y + fallingObject2.size / 2 >= height - 20 && 
                fallingObject2.x >= catcher.x && 
                fallingObject2.x <= catcher.x + catcher.width) {
                score--; // Decrease score for blue object
                fallingObject2.reset(); // Reset blue object
            }

            // Display the catcher
            fill(0, 255, 0); // Green color for catcher
            rect(catcher.x, height - 20, catcher.width, 10); // Draw catcher as a rectangle

            // Display the score
            fill(0);
            textSize(20);
            text("Score: " + score, 10, 30); // Display the score
        }

        class FallingObject {
            constructor(r, g, b) {
                this.x = random(width);
                this.y = 0;
                this.size = 20;
                this.color = color(r, g, b);
                this.speed = random(1, 3);
            }

            update() {
                this.y += this.speed; // Move down
                if (this.y > height) { // Reset to top if it falls off the screen
                    this.y = 0;
                    this.x = random(width);
                }
            }

            display() {
                fill(this.color);
                ellipse(this.x, this.y, this.size); // Draw the falling object
            }

            reset() {
                this.y = 0;
                this.x = random(width); // Reset position
            }
        }
    </script>
</body>

</html>
